@model Tour.Models.Attrations

@{
    ViewBag.Title = "Display";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Display</h2>
<div class="card shadow mt-4" href="@Url.Action("Display", new {id = Model.AttrationID})">
    <div class="row">

        <div class="col-md-5">
            @if (Model.Picture1 == "")
            {
                <img src="~/photos/null.jpg" class="img-fluid m-2" />
            }
            else
            {
                <img src="@Model.Picture1" class="img-fluid m-2"  data-toggle="tooltip" data-placement="left" title="@Model.Picdescribe1"/>
            }
        </div>

        <div class="col-md-7">
            <div class="card-body mt-2 mr-2" id="card-body">
                <h2 class="text-dark">
                    <strong>@Model.AttrationName</strong>
                </h2>
                <h4>@Model.Address </h4>
                <h6>@Model.Tel</h6>
                <p>
                    @Html.Raw(Model.Ticketinfo.ToString().Replace("\n", "<br>")) @*把\n都換成<br>  Html.Raw:遇到html標籤都執行*@
                </p>
                <div>
                    @Html.Raw(Model.Description.ToString().Replace("\n", "<br>")) @*把\n都換成<br>  Html.Raw:遇到html標籤都執行*@
                </div>
            </div>
        </div>

    </div>
    <div class="card-footer  bg-white  border-0">



        <div id="map" class="float-right"></div>

        <h3 class="text-right">
            <i class="bi bi-heart-fill text-danger" data-toggle="tooltip" data-placement="bottom" title="加入書籤"></i>
        </h3>
    </div>
</div>



<div class="text-right mt-5">
    <a href="@Url.Action("Index")"><i class="bi bi-backspace-fill"></i><b>返回主頁</b></a>
</div>

@section css{
    <style>
        /* Set the size of the div element that contains the map */
        #map {
            height: 600px; /* The height is 400 pixels */
            width: 100%; /* The width is the width of the web page */
        }

        #card-body{
            background-color:#9ff5f5
        }
    </style>
    }

@section scripts{
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    }

@section map{
    <script async
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCIsHhLc3NR0CNIU94kRkZy-owisY9ksNw&callback=initMap">
    </script>

    <script>
        // Initialize and add the map
        function initMap() {
            // The location of Uluru
            const position = { lat: @Model.Py, lng: @Model.Px };

            // The map, centered at Uluru
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 16,
                center: position,
            });

            //訊息框內文
            const contentString =
                '<div id="content">' +
                '<div id="siteNotice">' +
                "</div>" +
                '<h1 id="firstHeading" class="firstHeading">@Model.AttrationName</h1>' +
                '<div id="bodyContent">' +
                "<p>@Model.Description</p>" +
                "</div>" +
                "</div>";

            //訊息框
            const infowindow = new google.maps.InfoWindow({
                content: contentString,
                ariaLabel: "@Model.AttrationName",
            });

            //marker的圖樣
            const image =
                "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png";

            // The marker, positioned at Uluru
            const marker = new google.maps.Marker({
                position: position,
                map: map,
                icon:image,
            });

            //點擊觸發訊息框
            marker.addListener("click", () => {
                infowindow.open({
                    anchor: marker,
                    map,
                });
            });
        }

        window.initMap = initMap;

    </script>
    }